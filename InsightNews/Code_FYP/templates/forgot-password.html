<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width" , initial-scale="1.0">
  <title>Login & Registration Form</title>
  <link rel="stylesheet" type="text/css" href="static\styles\style_login_register.css" />
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>

<body>
  <div class="container">
    <div class="forms-container">
      <div class="forgot-forms">
        <!--Display successful and error messages-->
        {% for category,message in get_flashed_messages(with_categories=true) %}
        {% if message %}
        <div class="alert-{{category}}">
          <span>{{message}}</span>
          <button class="exit-btn">
            <ion-icon name="close-outline"></ion-icon>
          </button>
        </div>
        {% endif %}
        {% endfor %}
        <form method="post" class="sign-in-form">
          <h2 class="title">Update</h2>

          {% if not status %}
          <div class="input-field">
            <i class='bx bxs-envelope'></i>
            <input type="text" placeholder="Email" name="email" required />
          </div>
          <input type="submit" class="btn solid" value="Send" name="forgot" />

          {% else %}
          <div class="input-field">
            <i class='bx bxs-lock-alt'></i>
            <input type="password" placeholder="Password" name="password" required />
          </div>
          <div class="input-field">
            <i class='bx bxs-lock-alt'></i>
            <input type="password" placeholder="Confirmed Password" name="confirmed_password" required />
          </div>
          <input type="submit" class="btn solid" value="Update" name="update_pass" />
          {% endif %}

        </form>
      </div>
    </div>

    <div class="panels-container">
      <div class="panel left-panel">
        <div class="content">
          <h3>Forgot Password</h3>
          <p>
            Enter your registered email address and update your password
          </p>
          <a href="{{url_for('authenticate')}}">
            <button class="btn transparent" id="sign-in-btn">
              Sign In
            </button>
          </a>
        </div>
        <img src="static/image/status_update.svg" class="image" alt="" />
      </div>
    </div>
  </div>

  <!--JQuery CDN link-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>

  <script>
    // close flash message
    $('.exit-btn').click(function () {
      $('.alert-warning').addClass('active');
      $('.alert-success').addClass('active');
    });

    // set timeout for flash message
    setTimeout(function () {
      $('.alert-warning').fadeOut('slow');
      $('.alert-success').fadeOut('slow');
    }, 30000); //30 seconds

  </script>

</body>

</html>